CXXFLAGS := -std=c++11 -pthread
DBFLAGS := -g -Wall
CXX := g++
#./obj/
OBJDIR := obj
COMOBJ := $(OBJDIR)/main.o $(OBJDIR)/Serial.o

# NOTE: $@ is the name of the target, 
#       $< is the name of the first input file

# all depends on every autogenerated target
all: $(COMOBJ)
	@$(CXX) -o putToSleep $(COMOBJ) $(CXXFLAGS) $(DBFLAGS)
	@echo putToSleep complete

# This rule is your standard .c->.o rule
$(OBJDIR)/%.o: %.cpp 
	@$(CXX) -c $< -o $@ $(CXXFLAGS) $(DBFLAGS)
	@echo $@ complete

# removes all of the executables AND all of the .o files from ./obj
clean: 
	@-$ rm $(OBJDIR)/test*.o
	@-$ rm putToSleep
	@-$(foreach var, $(COMOBJ),rm $(var);) 